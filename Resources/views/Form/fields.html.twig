{% block ace_editor_widget %}
    {% spaceless %}
        <script src="{{ asset('bundles/stkace/ace/src-min/ace.js') }}" type="text/javascript" charset="utf-8"></script>
        <textarea {{ block('widget_attributes') }}>{{ value }}</textarea>
        <pre id="ace_{{ id }}"></pre>
        <script type="text/javascript">
            (function() {
                var editor = ace.edit("ace_{{ id }}");
                editor.setTheme("ace/theme/twilight");
                editor.session.setMode("ace/mode/javascript");

                var textarea = document.getElementById('{{ id }}');
                textarea.style.visibility = 'hidden';

                editor.getSession().on('change', function(){
                    textarea.value = editor.getSession().getValue();
                });
            })();
        </script>
    {% endspaceless %}
{% endblock %}